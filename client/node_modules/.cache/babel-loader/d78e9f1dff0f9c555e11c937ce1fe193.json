{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abeer\\\\OneDrive\\\\Desktop\\\\Main\\\\MERN_stack\\\\Exam\\\\client\\\\src\\\\components\\\\Update.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport AuthorForm from './AuthorForm';\nimport axios from 'axios';\nimport { navigate } from '@reach/router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UpdatePerson = ({\n  id,\n  Authors,\n  setAuthors\n}) => {\n  _s();\n\n  const [Name, setName] = useState(\"\");\n  const [errors, setErrors] = useState([]);\n  useEffect(() => {\n    const ThisAuthor = Authors.filter(author => author._id === id)[0];\n    console.log(ThisAuthor);\n    setName(ThisAuthor.Name);\n  }, [id, Authors]);\n\n  const updateHandler = e => {\n    e.preventDefault();\n    const updatedAuthor = {\n      Name\n    };\n    axios.put(`http://localhost:8000/edit/${id}`, updatedAuthor).then(res => {\n      let tempArr = [...Authors];\n\n      for (let i = 0; i < tempArr.length; i++) {\n        if (tempArr[i]._id === id) {\n          tempArr[i] = res.data;\n        }\n      }\n\n      setAuthors(tempArr);\n      navigate(\"/\");\n    }).catch(err => {\n      const errRes = err.response.data.errors;\n      const errArr = [];\n      console.log(errRes);\n\n      for (const key of Object.keys(errRes)) {\n        errArr.push(errRes[key].message);\n      }\n\n      setErrors(errArr);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Update \", Name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), errors.map((err, idx) => {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: \"40px\"\n        },\n        children: err\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(AuthorForm, {\n      formHandler: updateHandler,\n      Name: Name,\n      setName: setName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UpdatePerson, \"F+mtsmaF32H/oRwbWOhv+JynPu4=\");\n\n_c = UpdatePerson;\nexport default UpdatePerson;\n\nvar _c;\n\n$RefreshReg$(_c, \"UpdatePerson\");","map":{"version":3,"sources":["C:/Users/abeer/OneDrive/Desktop/Main/MERN_stack/Exam/client/src/components/Update.jsx"],"names":["React","useState","useEffect","AuthorForm","axios","navigate","UpdatePerson","id","Authors","setAuthors","Name","setName","errors","setErrors","ThisAuthor","filter","author","_id","console","log","updateHandler","e","preventDefault","updatedAuthor","put","then","res","tempArr","i","length","data","catch","err","errRes","response","errArr","key","Object","keys","push","message","map","idx","marginTop"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,eAAzB;;;AAGA,MAAMC,YAAY,GAAG,CAAC;AAACC,EAAAA,EAAD;AAAKC,EAAAA,OAAL;AAAcC,EAAAA;AAAd,CAAD,KAA+B;AAAA;;AAChD,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACW,MAAD,EAASC,SAAT,IAAsBZ,QAAQ,CAAC,EAAD,CAApC;AAEAC,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMY,UAAU,GAAGN,OAAO,CAACO,MAAR,CAAeC,MAAM,IAAIA,MAAM,CAACC,GAAP,KAAeV,EAAxC,EAA4C,CAA5C,CAAnB;AACAW,IAAAA,OAAO,CAACC,GAAR,CAAYL,UAAZ;AACAH,IAAAA,OAAO,CAACG,UAAU,CAACJ,IAAZ,CAAP;AACH,GAJQ,EAIN,CAACH,EAAD,EAAKC,OAAL,CAJM,CAAT;;AAMA,QAAMY,aAAa,GAAGC,CAAC,IAAG;AACtBA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMC,aAAa,GAAG;AACrBb,MAAAA;AADqB,KAAtB;AAGAN,IAAAA,KAAK,CAACoB,GAAN,CAAW,8BAA6BjB,EAAG,EAA3C,EAA8CgB,aAA9C,EACKE,IADL,CACWC,GAAG,IAAI;AACV,UAAIC,OAAO,GAAG,CAAC,GAAGnB,OAAJ,CAAd;;AACA,WAAK,IAAIoB,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAED,OAAO,CAACE,MAAzB,EAAiCD,CAAC,EAAlC,EAAqC;AACjC,YAAGD,OAAO,CAACC,CAAD,CAAP,CAAWX,GAAX,KAAmBV,EAAtB,EAAyB;AACrBoB,UAAAA,OAAO,CAACC,CAAD,CAAP,GAAaF,GAAG,CAACI,IAAjB;AACH;AACJ;;AACDrB,MAAAA,UAAU,CAACkB,OAAD,CAAV;AACAtB,MAAAA,QAAQ,CAAC,GAAD,CAAR;AACH,KAVL,EAWK0B,KAXL,CAWWC,GAAG,IAAI;AACV,YAAMC,MAAM,GAAGD,GAAG,CAACE,QAAJ,CAAaJ,IAAb,CAAkBlB,MAAjC;AACA,YAAMuB,MAAM,GAAG,EAAf;AACAjB,MAAAA,OAAO,CAACC,GAAR,CAAYc,MAAZ;;AACA,WAAK,MAAMG,GAAX,IAAkBC,MAAM,CAACC,IAAP,CAAYL,MAAZ,CAAlB,EAAsC;AAClCE,QAAAA,MAAM,CAACI,IAAP,CAAYN,MAAM,CAACG,GAAD,CAAN,CAAYI,OAAxB;AACH;;AACD3B,MAAAA,SAAS,CAACsB,MAAD,CAAT;AACH,KAnBL;AAoBH,GAzBD;;AA0BA,sBAEI;AAAA,4BAEI;AAAA,4BAAYzB,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,EAIOE,MAAM,CAAC6B,GAAP,CAAW,CAACT,GAAD,EAAMU,GAAN,KAAc;AACxB,0BACI;AAAG,QAAA,KAAK,EAAI;AAAEC,UAAAA,SAAS,EAAG;AAAd,SAAZ;AAAA,kBAA6CX;AAA7C,SAAuCU,GAAvC;AAAA;AAAA;AAAA;AAAA,cADJ;AAGH,KAJE,CAJP,eAUI,QAAC,UAAD;AACA,MAAA,WAAW,EAAEtB,aADb;AAEA,MAAA,IAAI,EAAEV,IAFN;AAGA,MAAA,OAAO,EAAEC;AAHT;AAAA;AAAA;AAAA;AAAA,YAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ;AAsBH,CA1DD;;GAAML,Y;;KAAAA,Y;AA4DN,eAAeA,YAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport AuthorForm from './AuthorForm';\r\nimport axios from 'axios';\r\nimport { navigate } from '@reach/router';\r\n\r\n\r\nconst UpdatePerson = ({id, Authors, setAuthors}) => {\r\n    const [Name, setName] = useState(\"\");\r\n    const [errors, setErrors] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        const ThisAuthor = Authors.filter(author => author._id === id)[0];\r\n        console.log(ThisAuthor);\r\n        setName(ThisAuthor.Name);\r\n    }, [id, Authors])\r\n\r\n    const updateHandler = e =>{\r\n        e.preventDefault();\r\n        const updatedAuthor = {\r\n         Name\r\n        }\r\n        axios.put(`http://localhost:8000/edit/${id}`, updatedAuthor)\r\n            .then( res => {\r\n                let tempArr = [...Authors];\r\n                for (let i=0; i< tempArr.length; i++){\r\n                    if(tempArr[i]._id === id){\r\n                        tempArr[i] = res.data;\r\n                    }\r\n                }\r\n                setAuthors(tempArr);\r\n                navigate(\"/\");\r\n            })\r\n            .catch(err => {\r\n                const errRes = err.response.data.errors;\r\n                const errArr = [];\r\n                console.log(errRes);\r\n                for (const key of Object.keys(errRes)){\r\n                    errArr.push(errRes[key].message);\r\n                }\r\n                setErrors(errArr);\r\n            })\r\n    }\r\n    return(\r\n        \r\n        <div>\r\n            \r\n            <h1>Update {Name}</h1>\r\n            \r\n              {errors.map((err, idx) => {\r\n                return(\r\n                    <p style = {{ marginTop : \"40px\"}}key={idx}>{err}</p>\r\n                )\r\n            })} \r\n\r\n            <AuthorForm \r\n            formHandler={updateHandler}\r\n            Name={Name}\r\n            setName={setName}\r\n      \r\n            />\r\n           \r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default UpdatePerson;"]},"metadata":{},"sourceType":"module"}